{% extends "base.html" %}

{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="m-0">Vendas</h2>

    {% if funcionario_tipo == "FUNC" %}
        <a href="/vendas/nova/" class="btn btn-success">
            Fazer Venda
        </a>
    {% endif %}
</div>

<table class="table table-bordered table-striped align-middle">
    <thead class="table-dark">
        <tr>
            <th style="width: 10%">ID</th>
            <th style="width: 20%">Data</th>
            <th style="width: 35%">Cliente</th>
            <th style="width: 20%">Total</th>
            <th style="width: 15%; text-align:center;">Ações</th>
        </tr>
    </thead>

    <tbody>
    {% for venda in vendas %}
        <tr>
            <td>{{ venda.id }}</td>
            <td>{{ venda.data_venda|date:"d/m/Y" }}</td>
            <td>{{ venda.cliente.nome }}</td>
            <td>R$ {{ venda.valor_total|floatformat:2 }}</td>

            <td class="text-center">
                <a class="btn btn-secondary btn-sm" href="/vendas/{{ venda.id }}/">
                    Detalhes
                </a>

                <a class="btn btn-danger btn-sm" href="/vendas/{{ venda.id }}/excluir/">
                    Excluir
                </a>
            </td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="5" class="text-center py-3">Nenhuma venda registrada.</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}
